# é£Ÿå…»æ™ºè„‘ (Dietary Sage) å…¨æ ˆå¼€å‘è®¡åˆ’

> åŸºäºä¸­åŒ»ä½“è´¨ç†è®ºçš„æ™ºèƒ½é£Ÿå…»æ¨èç³»ç»Ÿ

## ä¸€ã€é¡¹ç›®æ¦‚è¿°

### 1.1 é¡¹ç›®ç®€ä»‹

"é£Ÿå…»æ™ºè„‘"æ˜¯ä¸€æ¬¾èåˆä¸­åŒ»ä½“è´¨è¾¨è¯†ä¸ç°ä»£è¥å…»å­¦çš„æ™ºèƒ½é¥®é£Ÿæ¨èç³»ç»Ÿã€‚ç”¨æˆ·é€šè¿‡ä½“è´¨è¯Šæ–­ã€å£å‘³åå¥½è®¾ç½®ï¼Œè·å¾—ä¸ªæ€§åŒ–çš„é£Ÿå…»æ–¹æ¡ˆå’Œèœè°±æ¨èã€‚

### 1.2 æ ¸å¿ƒåŠŸèƒ½

| æ¨¡å— | åŠŸèƒ½æè¿° |
|------|----------|
| ä½“è´¨è¯Šæ–­ | AIé—®è¯Š + æ‰‹åŠ¨é€‰æ‹©ï¼Œè¯†åˆ«ä¹ç§ä¸­åŒ»ä½“è´¨ |
| å£å‘³è°ƒä¼˜ | äº”å‘³åå¥½ã€é¥®é£Ÿç¦å¿Œã€ç‰¹æ®ŠçŠ¶æ€ã€ç”¨é¤åœºæ™¯ |
| æ™ºè†³æ¨è | åŸºäºä½“è´¨+åå¥½çš„ä¸ªæ€§åŒ–èœè°±æ¨è |
| é£Ÿæç™¾ç§‘ | é£Ÿææ€§å‘³å½’ç»ã€åŠŸæ•ˆæŸ¥è¯¢ |
| ç”¨æˆ·ä¸­å¿ƒ | æ³¨å†Œç™»å½•ã€æ”¶è—ã€å†å²è®°å½• |

### 1.3 æŠ€æœ¯æ ˆ

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        Frontend                              â”‚
â”‚  Vue 3 + Vite + Pinia + Vue Router + Axios + TailwindCSS    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â”‚ RESTful API (JSON)
                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        Backend                               â”‚
â”‚  Node.js + Koa2 + Koa-Router + Koa-Body + JWT + Joi        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                       Database                               â”‚
â”‚  MongoDB (Mongoose) / MySQL (Sequelize/Knex)                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Third-Party Services                      â”‚
â”‚  AIå¤§æ¨¡å‹API / å¤©æ°”API / èŠ‚æ°”API / å¯¹è±¡å­˜å‚¨OSS              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## äºŒã€é¡¹ç›®ç›®å½•ç»“æ„

```
FoodSynergy/
â”œâ”€â”€ UI/                              # åŸå‹è®¾è®¡ï¼ˆå·²å®Œæˆï¼‰
â”‚
â”œâ”€â”€ client/                          # å‰ç«¯é¡¹ç›®
â”‚   â”œâ”€â”€ public/
â”‚   â”‚   â””â”€â”€ favicon.ico
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ api/                     # API è¯·æ±‚å°è£…
â”‚   â”‚   â”‚   â”œâ”€â”€ index.js             # Axios å®ä¾‹é…ç½®
â”‚   â”‚   â”‚   â”œâ”€â”€ auth.js              # è®¤è¯ç›¸å…³ API
â”‚   â”‚   â”‚   â”œâ”€â”€ user.js              # ç”¨æˆ·ç›¸å…³ API
â”‚   â”‚   â”‚   â”œâ”€â”€ constitution.js      # ä½“è´¨ç›¸å…³ API
â”‚   â”‚   â”‚   â”œâ”€â”€ recipe.js            # èœè°±ç›¸å…³ API
â”‚   â”‚   â”‚   â””â”€â”€ ingredient.js        # é£Ÿæç›¸å…³ API
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ assets/                  # é™æ€èµ„æº
â”‚   â”‚   â”‚   â”œâ”€â”€ images/
â”‚   â”‚   â”‚   â”œâ”€â”€ fonts/
â”‚   â”‚   â”‚   â””â”€â”€ styles/
â”‚   â”‚   â”‚       â”œâ”€â”€ variables.css    # CSS å˜é‡
â”‚   â”‚   â”‚       â”œâ”€â”€ base.css         # åŸºç¡€æ ·å¼
â”‚   â”‚   â”‚       â””â”€â”€ transitions.css  # è¿‡æ¸¡åŠ¨ç”»
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ components/              # å…¬å…±ç»„ä»¶
â”‚   â”‚   â”‚   â”œâ”€â”€ common/              # é€šç”¨ç»„ä»¶
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ AppHeader.vue
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ AppFooter.vue
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ AppButton.vue
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ AppCard.vue
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ AppModal.vue
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ AppToast.vue
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ AppLoading.vue
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ AppEmpty.vue
â”‚   â”‚   â”‚   â”‚
â”‚   â”‚   â”‚   â”œâ”€â”€ body-scanner/        # ä½“è´¨è¯Šæ–­ç»„ä»¶
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ BodyModel.vue    # SVG äººä½“æ¨¡å‹
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ ConstitutionCard.vue
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ AiChat.vue       # AI é—®è¯Šå¯¹è¯
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ YinYangIndicator.vue
â”‚   â”‚   â”‚   â”‚
â”‚   â”‚   â”‚   â”œâ”€â”€ preference/          # åå¥½è®¾ç½®ç»„ä»¶
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ FlavorSlider.vue
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ ExclusionTags.vue
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ ContextToggle.vue
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ SceneSelector.vue
â”‚   â”‚   â”‚   â”‚
â”‚   â”‚   â”‚   â””â”€â”€ recipe/              # èœè°±ç›¸å…³ç»„ä»¶
â”‚   â”‚   â”‚       â”œâ”€â”€ RecipeCard.vue
â”‚   â”‚   â”‚       â”œâ”€â”€ RecipeDetail.vue
â”‚   â”‚   â”‚       â”œâ”€â”€ RecipeFilter.vue
â”‚   â”‚   â”‚       â”œâ”€â”€ IngredientTag.vue
â”‚   â”‚   â”‚       â””â”€â”€ NutritionChart.vue
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ composables/             # ç»„åˆå¼å‡½æ•°
â”‚   â”‚   â”‚   â”œâ”€â”€ useAuth.js           # è®¤è¯é€»è¾‘
â”‚   â”‚   â”‚   â”œâ”€â”€ useConstitution.js   # ä½“è´¨é€»è¾‘
â”‚   â”‚   â”‚   â”œâ”€â”€ usePreference.js     # åå¥½é€»è¾‘
â”‚   â”‚   â”‚   â”œâ”€â”€ useRecipe.js         # èœè°±é€»è¾‘
â”‚   â”‚   â”‚   â””â”€â”€ useToast.js          # æ¶ˆæ¯æç¤º
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ router/                  # è·¯ç”±é…ç½®
â”‚   â”‚   â”‚   â””â”€â”€ index.js
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ stores/                  # Pinia çŠ¶æ€ç®¡ç†
â”‚   â”‚   â”‚   â”œâ”€â”€ index.js
â”‚   â”‚   â”‚   â”œâ”€â”€ user.js              # ç”¨æˆ·çŠ¶æ€
â”‚   â”‚   â”‚   â”œâ”€â”€ constitution.js      # ä½“è´¨çŠ¶æ€
â”‚   â”‚   â”‚   â”œâ”€â”€ preference.js        # åå¥½çŠ¶æ€
â”‚   â”‚   â”‚   â””â”€â”€ recipe.js            # èœè°±çŠ¶æ€
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ utils/                   # å·¥å…·å‡½æ•°
â”‚   â”‚   â”‚   â”œâ”€â”€ request.js           # è¯·æ±‚å°è£…
â”‚   â”‚   â”‚   â”œâ”€â”€ storage.js           # æœ¬åœ°å­˜å‚¨
â”‚   â”‚   â”‚   â”œâ”€â”€ validators.js        # è¡¨å•éªŒè¯
â”‚   â”‚   â”‚   â”œâ”€â”€ formatters.js        # æ ¼å¼åŒ–å‡½æ•°
â”‚   â”‚   â”‚   â””â”€â”€ constants.js         # å¸¸é‡å®šä¹‰
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ views/                   # é¡µé¢è§†å›¾
â”‚   â”‚   â”‚   â”œâ”€â”€ Home.vue             # é¦–é¡µ/ä½“è´¨è¯Šæ–­
â”‚   â”‚   â”‚   â”œâ”€â”€ PreferenceTuner.vue  # å£å‘³è°ƒä¼˜
â”‚   â”‚   â”‚   â”œâ”€â”€ WisdomDashboard.vue  # æ™ºè†³æ¨è
â”‚   â”‚   â”‚   â”œâ”€â”€ RecipeDetail.vue     # èœè°±è¯¦æƒ…
â”‚   â”‚   â”‚   â”œâ”€â”€ IngredientLibrary.vue # é£Ÿæç™¾ç§‘
â”‚   â”‚   â”‚   â”œâ”€â”€ Profile.vue          # ä¸ªäººä¸­å¿ƒ
â”‚   â”‚   â”‚   â”œâ”€â”€ Favorites.vue        # æˆ‘çš„æ”¶è—
â”‚   â”‚   â”‚   â”œâ”€â”€ Login.vue            # ç™»å½•
â”‚   â”‚   â”‚   â””â”€â”€ Register.vue         # æ³¨å†Œ
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ App.vue                  # æ ¹ç»„ä»¶
â”‚   â”‚   â””â”€â”€ main.js                  # å…¥å£æ–‡ä»¶
â”‚   â”‚
â”‚   â”œâ”€â”€ index.html
â”‚   â”œâ”€â”€ vite.config.js
â”‚   â”œâ”€â”€ tailwind.config.js
â”‚   â”œâ”€â”€ postcss.config.js
â”‚   â””â”€â”€ package.json
â”‚
â”œâ”€â”€ server/                          # åç«¯é¡¹ç›®
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ app.js                   # Koa åº”ç”¨å…¥å£
â”‚   â”‚   â”œâ”€â”€ config/                  # é…ç½®æ–‡ä»¶
â”‚   â”‚   â”‚   â”œâ”€â”€ index.js             # é…ç½®èšåˆ
â”‚   â”‚   â”‚   â”œâ”€â”€ database.js          # æ•°æ®åº“é…ç½®
â”‚   â”‚   â”‚   â”œâ”€â”€ jwt.js               # JWT é…ç½®
â”‚   â”‚   â”‚   â””â”€â”€ third-party.js       # ç¬¬ä¸‰æ–¹æœåŠ¡é…ç½®
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ controllers/             # æ§åˆ¶å™¨
â”‚   â”‚   â”‚   â”œâ”€â”€ authController.js
â”‚   â”‚   â”‚   â”œâ”€â”€ userController.js
â”‚   â”‚   â”‚   â”œâ”€â”€ constitutionController.js
â”‚   â”‚   â”‚   â”œâ”€â”€ preferenceController.js
â”‚   â”‚   â”‚   â”œâ”€â”€ recipeController.js
â”‚   â”‚   â”‚   â”œâ”€â”€ ingredientController.js
â”‚   â”‚   â”‚   â””â”€â”€ aiController.js
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ middlewares/             # ä¸­é—´ä»¶
â”‚   â”‚   â”‚   â”œâ”€â”€ auth.js              # JWT è®¤è¯
â”‚   â”‚   â”‚   â”œâ”€â”€ errorHandler.js      # é”™è¯¯å¤„ç†
â”‚   â”‚   â”‚   â”œâ”€â”€ validator.js         # å‚æ•°éªŒè¯
â”‚   â”‚   â”‚   â”œâ”€â”€ logger.js            # æ—¥å¿—è®°å½•
â”‚   â”‚   â”‚   â””â”€â”€ rateLimit.js         # é™æµ
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ models/                  # æ•°æ®æ¨¡å‹
â”‚   â”‚   â”‚   â”œâ”€â”€ User.js
â”‚   â”‚   â”‚   â”œâ”€â”€ Constitution.js
â”‚   â”‚   â”‚   â”œâ”€â”€ Preference.js
â”‚   â”‚   â”‚   â”œâ”€â”€ Recipe.js
â”‚   â”‚   â”‚   â”œâ”€â”€ Ingredient.js
â”‚   â”‚   â”‚   â”œâ”€â”€ Favorite.js
â”‚   â”‚   â”‚   â””â”€â”€ ChatHistory.js
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ routes/                  # è·¯ç”±
â”‚   â”‚   â”‚   â”œâ”€â”€ index.js             # è·¯ç”±èšåˆ
â”‚   â”‚   â”‚   â”œâ”€â”€ auth.js
â”‚   â”‚   â”‚   â”œâ”€â”€ user.js
â”‚   â”‚   â”‚   â”œâ”€â”€ constitution.js
â”‚   â”‚   â”‚   â”œâ”€â”€ preference.js
â”‚   â”‚   â”‚   â”œâ”€â”€ recipe.js
â”‚   â”‚   â”‚   â”œâ”€â”€ ingredient.js
â”‚   â”‚   â”‚   â””â”€â”€ ai.js
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ services/                # ä¸šåŠ¡é€»è¾‘å±‚
â”‚   â”‚   â”‚   â”œâ”€â”€ authService.js
â”‚   â”‚   â”‚   â”œâ”€â”€ userService.js
â”‚   â”‚   â”‚   â”œâ”€â”€ constitutionService.js
â”‚   â”‚   â”‚   â”œâ”€â”€ recipeService.js
â”‚   â”‚   â”‚   â”œâ”€â”€ recommendService.js  # æ¨èç®—æ³•
â”‚   â”‚   â”‚   â””â”€â”€ aiService.js         # AI å¯¹æ¥
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ utils/                   # å·¥å…·å‡½æ•°
â”‚   â”‚   â”‚   â”œâ”€â”€ response.js          # å“åº”å°è£…
â”‚   â”‚   â”‚   â”œâ”€â”€ jwt.js               # JWT å·¥å…·
â”‚   â”‚   â”‚   â”œâ”€â”€ crypto.js            # åŠ å¯†å·¥å…·
â”‚   â”‚   â”‚   â”œâ”€â”€ solarTerm.js         # èŠ‚æ°”è®¡ç®—
â”‚   â”‚   â”‚   â””â”€â”€ validators.js        # éªŒè¯å™¨
â”‚   â”‚   â”‚
â”‚   â”‚   â””â”€â”€ data/                    # é™æ€æ•°æ®/ç§å­æ•°æ®
â”‚   â”‚       â”œâ”€â”€ constitutions.json   # ä¹ç§ä½“è´¨æ•°æ®
â”‚   â”‚       â”œâ”€â”€ ingredients.json     # é£Ÿææ•°æ®
â”‚   â”‚       â”œâ”€â”€ recipes.json         # èœè°±æ•°æ®
â”‚   â”‚       â””â”€â”€ solarTerms.json      # èŠ‚æ°”æ•°æ®
â”‚   â”‚
â”‚   â”œâ”€â”€ tests/                       # æµ‹è¯•æ–‡ä»¶
â”‚   â”‚   â”œâ”€â”€ unit/
â”‚   â”‚   â””â”€â”€ integration/
â”‚   â”‚
â”‚   â”œâ”€â”€ scripts/                     # è„šæœ¬
â”‚   â”‚   â”œâ”€â”€ seed.js                  # æ•°æ®åº“åˆå§‹åŒ–
â”‚   â”‚   â””â”€â”€ migrate.js               # æ•°æ®è¿ç§»
â”‚   â”‚
â”‚   â”œâ”€â”€ .env.example                 # ç¯å¢ƒå˜é‡ç¤ºä¾‹
â”‚   â”œâ”€â”€ .env                         # ç¯å¢ƒå˜é‡ï¼ˆgitignoreï¼‰
â”‚   â””â”€â”€ package.json
â”‚
â”œâ”€â”€ docs/                            # æ–‡æ¡£
â”‚   â”œâ”€â”€ api.md                       # API æ–‡æ¡£
â”‚   â”œâ”€â”€ database.md                  # æ•°æ®åº“è®¾è®¡
â”‚   â””â”€â”€ deployment.md                # éƒ¨ç½²æ–‡æ¡£
â”‚
â”œâ”€â”€ docker-compose.yml               # Docker ç¼–æ’
â”œâ”€â”€ .gitignore
â”œâ”€â”€ README.md
â””â”€â”€ plan.md                          # æœ¬æ–‡ä»¶
```

---

## ä¸‰ã€æ•°æ®åº“è®¾è®¡

### 3.1 æ•°æ®åº“é€‰å‹å»ºè®®

| æ•°æ®åº“ | ä¼˜åŠ¿ | é€‚ç”¨åœºæ™¯ |
|--------|------|----------|
| **MongoDB** | çµæ´»çš„æ–‡æ¡£ç»“æ„ã€æ˜“æ‰©å±•ã€é€‚åˆå­˜å‚¨JSON | èœè°±æ•°æ®ç»“æ„å¤šå˜ã€å¿«é€Ÿè¿­ä»£ |
| **MySQL** | å¼ºä¸€è‡´æ€§ã€äº‹åŠ¡æ”¯æŒã€å…³ç³»æŸ¥è¯¢ | ç”¨æˆ·æ•°æ®ã€æ”¶è—å…³ç³» |

**æ¨èæ–¹æ¡ˆ**ï¼šé‡‡ç”¨ **MongoDB** ä½œä¸ºä¸»æ•°æ®åº“ï¼ŒåŸå› ï¼š
1. èœè°±ã€é£Ÿææ•°æ®å­—æ®µçµæ´»ï¼ˆä¸åŒèœè°±æ­¥éª¤æ•°é‡ä¸åŒï¼‰
2. ç”¨æˆ·åå¥½æ˜¯åµŒå¥—JSONç»“æ„ï¼ŒMongoDBåŸç”Ÿæ”¯æŒ
3. å¼€å‘æ•ˆç‡é«˜ï¼Œæ— éœ€é¢‘ç¹æ”¹è¡¨ç»“æ„

### 3.2 æ•°æ®æ¨¡å‹è®¾è®¡ (MongoDB)

#### Userï¼ˆç”¨æˆ·ï¼‰

```javascript
{
  _id: ObjectId,
  username: String,           // ç”¨æˆ·å
  email: String,              // é‚®ç®±ï¼ˆå”¯ä¸€ï¼‰
  password: String,           // å¯†ç ï¼ˆbcryptåŠ å¯†ï¼‰
  avatar: String,             // å¤´åƒURL
  phone: String,              // æ‰‹æœºå·

  constitution: {             // ä½“è´¨ä¿¡æ¯
    type: String,             // ä½“è´¨ç±»å‹ enum
    diagnosedAt: Date,        // è¯Šæ–­æ—¶é—´
    diagnosisMethod: String,  // è¯Šæ–­æ–¹å¼ï¼š'ai' | 'manual'
    yinYangBalance: [Number, Number],  // é˜´é˜³æ¯”ä¾‹
    qiBloodLevel: Number      // æ°”è¡€å€¼
  },

  preferences: {              // å£å‘³åå¥½
    flavors: {                // äº”å‘³åå¥½ (0-4)
      sour: Number,
      sweet: Number,
      bitter: Number,
      spicy: Number,
      salty: Number
    },
    exclusions: [String],     // ç¦å¿Œé£Ÿæ
    dietaryStyle: String,     // é¥®é£Ÿæ–¹å¼ï¼šnormal/vegetarian/vegan/halal
    defaultScene: {           // é»˜è®¤åœºæ™¯
      mealType: String,
      cookingTime: String
    }
  },

  contextStatus: [String],    // å½“å‰çŠ¶æ€ï¼šmenstrual/stayup/cold/exercise

  favorites: [ObjectId],      // æ”¶è—èœè°±ID

  createdAt: Date,
  updatedAt: Date
}
```

#### Constitutionï¼ˆä½“è´¨ç±»å‹ï¼‰

```javascript
{
  _id: ObjectId,
  code: String,               // ä½“è´¨ä»£ç ï¼šbalanced/qi-deficiency/yang-deficiency...
  name: String,               // ä¸­æ–‡åï¼šå¹³å’Œè´¨/æ°”è™šè´¨/é˜³è™šè´¨...
  icon: String,               // å›¾æ ‡ emoji
  description: String,        // æè¿°
  characteristics: [String],  // ç‰¹å¾åˆ—è¡¨

  dietaryAdvice: {
    recommended: [String],    // å®œåƒé£Ÿæ
    avoided: [String],        // å¿Œåƒé£Ÿæ
    suitableFlavors: [String], // é€‚å®œå£å‘³
    cookingMethods: [String]  // æ¨èçƒ¹é¥ªæ–¹å¼
  },

  seasonalTips: {             // èŠ‚æ°”å…»ç”Ÿå»ºè®®
    spring: String,
    summer: String,
    autumn: String,
    winter: String
  },

  visualEffects: {            // äººä½“æ¨¡å‹å…‰æ•ˆé…ç½®
    coldAreas: [String],      // å¯’æ°”åŒºåŸŸ
    hotAreas: [String]        // çƒ­æ°”åŒºåŸŸ
  }
}
```

#### Ingredientï¼ˆé£Ÿæï¼‰

```javascript
{
  _id: ObjectId,
  name: String,               // é£Ÿæåç§°
  alias: [String],            // åˆ«å
  category: String,           // åˆ†ç±»ï¼švegetable/meat/seafood/grain/fruit/herb
  icon: String,               // å›¾æ ‡
  image: String,              // å›¾ç‰‡URL

  tcmProperties: {            // ä¸­åŒ»å±æ€§
    nature: String,           // æ€§ï¼šhot/warm/neutral/cool/cold
    flavor: [String],         // å‘³ï¼šsour/sweet/bitter/spicy/salty
    meridians: [String],      // å½’ç»ï¼šheart/liver/spleen/lung/kidney
    effects: [String]         // åŠŸæ•ˆ
  },

  nutrition: {                // è¥å…»æˆåˆ† (per 100g)
    calories: Number,
    protein: Number,
    fat: Number,
    carbs: Number,
    fiber: Number,
    vitamins: Object,
    minerals: Object
  },

  suitableConstitutions: [String],  // é€‚å®œä½“è´¨
  avoidConstitutions: [String],     // ä¸å®œä½“è´¨

  seasonality: [String],      // å½“å­£æœˆä»½ï¼š['10', '11', '12']
  tags: [String],             // æ ‡ç­¾ï¼šorganic/local/imported

  createdAt: Date,
  updatedAt: Date
}
```

#### Recipeï¼ˆèœè°±ï¼‰

```javascript
{
  _id: ObjectId,
  name: String,               // èœå
  description: String,        // ç®€ä»‹
  image: String,              // å°é¢å›¾
  video: String,              // è§†é¢‘URL

  tcmProperties: {            // ä¸­åŒ»å±æ€§
    nature: String,           // æ•´ä½“æ€§å‘³
    flavors: [String],
    meridians: [String],
    effects: [String],        // åŠŸæ•ˆï¼šè¡¥æ°”/å…»è¡€/ç¥›æ¹¿...
    analysis: String          // é£Ÿå…»åˆ†ææ–‡å­—
  },

  ingredients: [{             // é£Ÿæåˆ—è¡¨
    ingredientId: ObjectId,
    name: String,
    amount: String,           // ç”¨é‡
    isMain: Boolean           // æ˜¯å¦ä¸»æ–™
  }],

  steps: [{                   // çƒ¹é¥ªæ­¥éª¤
    order: Number,
    content: String,
    image: String,
    duration: Number          // é¢„è®¡æ—¶é•¿ï¼ˆåˆ†é’Ÿï¼‰
  }],

  metadata: {
    cookingTime: Number,      // æ€»æ—¶é•¿ï¼ˆåˆ†é’Ÿï¼‰
    difficulty: String,       // easy/medium/hard
    servings: Number,         // ä»½é‡
    calories: Number          // æ€»çƒ­é‡
  },

  suitability: {              // é€‚å®œæ€§
    constitutions: [{
      type: String,
      matchScore: Number      // åŒ¹é…åº¦ 0-100
    }],
    seasons: [String],        // é€‚å®œå­£èŠ‚
    contexts: [String]        // é€‚å®œçŠ¶æ€
  },

  author: ObjectId,           // ä½œè€…ï¼ˆç®¡ç†å‘˜æˆ–ç”¨æˆ·æŠ•ç¨¿ï¼‰
  status: String,             // draft/published/archived
  viewCount: Number,
  favoriteCount: Number,

  createdAt: Date,
  updatedAt: Date
}
```

#### ChatHistoryï¼ˆAIé—®è¯Šè®°å½•ï¼‰

```javascript
{
  _id: ObjectId,
  userId: ObjectId,
  sessionId: String,          // ä¼šè¯ID

  messages: [{
    role: String,             // 'user' | 'assistant'
    content: String,
    timestamp: Date
  }],

  result: {                   // è¯Šæ–­ç»“æœ
    constitution: String,
    confidence: Number,
    suggestions: [String]
  },

  createdAt: Date
}
```

---

## å››ã€RESTful API è®¾è®¡

### 4.1 API è§„èŒƒ

- **Base URL**: `/api/v1`
- **è®¤è¯æ–¹å¼**: Bearer Token (JWT)
- **å“åº”æ ¼å¼**:

```json
{
  "code": 200,
  "message": "success",
  "data": { ... },
  "timestamp": 1700000000000
}
```

### 4.2 API æ¥å£åˆ—è¡¨

#### è®¤è¯æ¨¡å— `/api/v1/auth`

| Method | Endpoint | æè¿° | è®¤è¯ |
|--------|----------|------|------|
| POST | `/register` | ç”¨æˆ·æ³¨å†Œ | å¦ |
| POST | `/login` | ç”¨æˆ·ç™»å½• | å¦ |
| POST | `/logout` | ç”¨æˆ·ç™»å‡º | æ˜¯ |
| POST | `/refresh-token` | åˆ·æ–°Token | æ˜¯ |
| POST | `/forgot-password` | å¿˜è®°å¯†ç  | å¦ |
| POST | `/reset-password` | é‡ç½®å¯†ç  | å¦ |

#### ç”¨æˆ·æ¨¡å— `/api/v1/user`

| Method | Endpoint | æè¿° | è®¤è¯ |
|--------|----------|------|------|
| GET | `/profile` | è·å–ç”¨æˆ·ä¿¡æ¯ | æ˜¯ |
| PUT | `/profile` | æ›´æ–°ç”¨æˆ·ä¿¡æ¯ | æ˜¯ |
| PUT | `/password` | ä¿®æ”¹å¯†ç  | æ˜¯ |
| PUT | `/avatar` | æ›´æ–°å¤´åƒ | æ˜¯ |
| GET | `/favorites` | è·å–æ”¶è—åˆ—è¡¨ | æ˜¯ |
| POST | `/favorites/:recipeId` | æ·»åŠ æ”¶è— | æ˜¯ |
| DELETE | `/favorites/:recipeId` | å–æ¶ˆæ”¶è— | æ˜¯ |

#### ä½“è´¨æ¨¡å— `/api/v1/constitution`

| Method | Endpoint | æè¿° | è®¤è¯ |
|--------|----------|------|------|
| GET | `/types` | è·å–æ‰€æœ‰ä½“è´¨ç±»å‹ | å¦ |
| GET | `/types/:code` | è·å–ä½“è´¨è¯¦æƒ… | å¦ |
| POST | `/diagnose` | AIä½“è´¨è¯Šæ–­ | æ˜¯ |
| PUT | `/user-constitution` | æ›´æ–°ç”¨æˆ·ä½“è´¨ | æ˜¯ |
| GET | `/user-constitution` | è·å–ç”¨æˆ·ä½“è´¨ | æ˜¯ |

#### åå¥½æ¨¡å— `/api/v1/preference`

| Method | Endpoint | æè¿° | è®¤è¯ |
|--------|----------|------|------|
| GET | `/` | è·å–ç”¨æˆ·åå¥½ | æ˜¯ |
| PUT | `/` | æ›´æ–°ç”¨æˆ·åå¥½ | æ˜¯ |
| PUT | `/flavors` | æ›´æ–°äº”å‘³åå¥½ | æ˜¯ |
| PUT | `/exclusions` | æ›´æ–°ç¦å¿Œ | æ˜¯ |
| PUT | `/context` | æ›´æ–°å½“å‰çŠ¶æ€ | æ˜¯ |

#### èœè°±æ¨¡å— `/api/v1/recipe`

| Method | Endpoint | æè¿° | è®¤è¯ |
|--------|----------|------|------|
| GET | `/` | è·å–èœè°±åˆ—è¡¨ï¼ˆåˆ†é¡µ+ç­›é€‰ï¼‰ | å¦ |
| GET | `/:id` | è·å–èœè°±è¯¦æƒ… | å¦ |
| GET | `/recommended` | è·å–ä¸ªæ€§åŒ–æ¨è | æ˜¯ |
| GET | `/seasonal` | è·å–æ—¶ä»¤èœè°± | å¦ |
| GET | `/search` | æœç´¢èœè°± | å¦ |
| POST | `/` | åˆ›å»ºèœè°±ï¼ˆç®¡ç†å‘˜ï¼‰ | æ˜¯ |
| PUT | `/:id` | æ›´æ–°èœè°±ï¼ˆç®¡ç†å‘˜ï¼‰ | æ˜¯ |
| DELETE | `/:id` | åˆ é™¤èœè°±ï¼ˆç®¡ç†å‘˜ï¼‰ | æ˜¯ |

#### é£Ÿææ¨¡å— `/api/v1/ingredient`

| Method | Endpoint | æè¿° | è®¤è¯ |
|--------|----------|------|------|
| GET | `/` | è·å–é£Ÿæåˆ—è¡¨ | å¦ |
| GET | `/:id` | è·å–é£Ÿæè¯¦æƒ… | å¦ |
| GET | `/seasonal` | è·å–å½“å­£é£Ÿæ | å¦ |
| GET | `/by-constitution/:code` | è·å–ä½“è´¨é€‚å®œé£Ÿæ | å¦ |
| GET | `/search` | æœç´¢é£Ÿæ | å¦ |

#### AIæ¨¡å— `/api/v1/ai`

| Method | Endpoint | æè¿° | è®¤è¯ |
|--------|----------|------|------|
| POST | `/chat` | AIå¯¹è¯ï¼ˆä½“è´¨é—®è¯Šï¼‰ | æ˜¯ |
| POST | `/analyze-recipe` | AIåˆ†æèœè°±é€‚é…åº¦ | æ˜¯ |
| GET | `/insight` | è·å–AIé£Ÿå…»æ´å¯Ÿ | æ˜¯ |
| GET | `/tip` | è·å–å…»ç”Ÿè´´å£« | å¦ |

#### ç³»ç»Ÿæ¨¡å— `/api/v1/system`

| Method | Endpoint | æè¿° | è®¤è¯ |
|--------|----------|------|------|
| GET | `/solar-term` | è·å–å½“å‰èŠ‚æ°” | å¦ |
| GET | `/health` | å¥åº·æ£€æŸ¥ | å¦ |

### 4.3 è¯·æ±‚/å“åº”ç¤ºä¾‹

#### ç”¨æˆ·ç™»å½•

```http
POST /api/v1/auth/login
Content-Type: application/json

{
  "email": "user@example.com",
  "password": "password123"
}
```

```json
{
  "code": 200,
  "message": "ç™»å½•æˆåŠŸ",
  "data": {
    "user": {
      "id": "64f...",
      "username": "å¼ ä¸‰",
      "email": "user@example.com",
      "avatar": "https://..."
    },
    "token": "eyJhbGciOiJIUzI1NiIs...",
    "refreshToken": "eyJhbGciOiJIUzI1NiIs...",
    "expiresIn": 7200
  }
}
```

#### è·å–ä¸ªæ€§åŒ–æ¨è

```http
GET /api/v1/recipe/recommended?page=1&limit=10
Authorization: Bearer eyJhbGciOiJIUzI1NiIs...
```

```json
{
  "code": 200,
  "message": "success",
  "data": {
    "list": [
      {
        "id": "64f...",
        "name": "å±±è¯æ’éª¨æ±¤",
        "image": "https://...",
        "nature": "æ¸©",
        "flavors": ["ç”˜"],
        "matchScore": 95,
        "cookingTime": 60,
        "difficulty": "ç®€å•",
        "description": "è¡¥è„¾å…»èƒƒï¼Œç›Šè‚ºæ­¢å’³"
      }
    ],
    "pagination": {
      "page": 1,
      "limit": 10,
      "total": 56,
      "totalPages": 6
    },
    "insight": {
      "constitution": "é˜³è™šè´¨",
      "solarTerm": "éœœé™",
      "recommendation": "å®œæ¸©è¡¥è„¾è‚¾ï¼Œæ¨èæ¸©çƒ­æ€§é£Ÿæ"
    }
  }
}
```

#### AIé—®è¯Šå¯¹è¯

```http
POST /api/v1/ai/chat
Authorization: Bearer eyJhbGciOiJIUzI1NiIs...
Content-Type: application/json

{
  "sessionId": "sess_123456",
  "message": "æˆ‘æœ€è¿‘æ¯”è¾ƒæ€•å†·ï¼Œæ‰‹è„šå†°å‡‰"
}
```

```json
{
  "code": 200,
  "message": "success",
  "data": {
    "reply": "äº†è§£äº†ï¼Œæ‰‹è„šå†°å‡‰æ˜¯é˜³è™šçš„å…¸å‹è¡¨ç°ã€‚è¯·é—®æ‚¨å¹³æ—¶å–œæ¬¢å–çƒ­æ°´è¿˜æ˜¯å‡‰æ°´å‘¢ï¼Ÿ",
    "options": [
      "å–œæ¬¢å–çƒ­æ°´",
      "å–œæ¬¢å–å‡‰æ°´",
      "éƒ½å¯ä»¥"
    ],
    "progress": 40,
    "isComplete": false
  }
}
```

---

## äº”ã€å‰ç«¯ç»„ä»¶è®¾è®¡

### 5.1 é¡µé¢è·¯ç”±

```javascript
const routes = [
  {
    path: '/',
    name: 'Home',
    component: () => import('@/views/Home.vue'),
    meta: { title: 'ä½“è´¨è¯Šæ–­' }
  },
  {
    path: '/preference',
    name: 'PreferenceTuner',
    component: () => import('@/views/PreferenceTuner.vue'),
    meta: { title: 'å£å‘³è°ƒä¼˜', requiresAuth: true }
  },
  {
    path: '/dashboard',
    name: 'WisdomDashboard',
    component: () => import('@/views/WisdomDashboard.vue'),
    meta: { title: 'æ™ºè†³æ¨è', requiresAuth: true }
  },
  {
    path: '/recipe/:id',
    name: 'RecipeDetail',
    component: () => import('@/views/RecipeDetail.vue'),
    meta: { title: 'èœè°±è¯¦æƒ…' }
  },
  {
    path: '/ingredients',
    name: 'IngredientLibrary',
    component: () => import('@/views/IngredientLibrary.vue'),
    meta: { title: 'é£Ÿæç™¾ç§‘' }
  },
  {
    path: '/profile',
    name: 'Profile',
    component: () => import('@/views/Profile.vue'),
    meta: { title: 'ä¸ªäººä¸­å¿ƒ', requiresAuth: true }
  },
  {
    path: '/favorites',
    name: 'Favorites',
    component: () => import('@/views/Favorites.vue'),
    meta: { title: 'æˆ‘çš„æ”¶è—', requiresAuth: true }
  },
  {
    path: '/login',
    name: 'Login',
    component: () => import('@/views/Login.vue'),
    meta: { title: 'ç™»å½•', guest: true }
  },
  {
    path: '/register',
    name: 'Register',
    component: () => import('@/views/Register.vue'),
    meta: { title: 'æ³¨å†Œ', guest: true }
  }
]
```

### 5.2 æ ¸å¿ƒç»„ä»¶è§„æ ¼

#### BodyModel.vueï¼ˆäººä½“æ¨¡å‹ï¼‰

```vue
<script setup>
defineProps({
  constitution: String,       // å½“å‰ä½“è´¨
  effects: Object,            // å…‰æ•ˆé…ç½®
  interactive: Boolean        // æ˜¯å¦å¯äº¤äº’
})

defineEmits(['acupoint-click'])
</script>
```

#### ConstitutionCard.vueï¼ˆä½“è´¨å¡ç‰‡ï¼‰

```vue
<script setup>
defineProps({
  type: String,               // ä½“è´¨ä»£ç 
  name: String,               // ä½“è´¨åç§°
  icon: String,
  description: String,
  traits: Array,
  selected: Boolean
})

defineEmits(['select'])
</script>
```

#### RecipeCard.vueï¼ˆèœè°±å¡ç‰‡ï¼‰

```vue
<script setup>
defineProps({
  id: String,
  name: String,
  image: String,
  nature: String,             // æ¸©/å¹³/å‡‰
  flavors: Array,
  matchScore: Number,
  cookingTime: Number,
  difficulty: String,
  description: String,
  isFavorite: Boolean
})

defineEmits(['click', 'favorite'])
</script>
```

### 5.3 çŠ¶æ€ç®¡ç† (Pinia)

```javascript
// stores/user.js
export const useUserStore = defineStore('user', {
  state: () => ({
    user: null,
    token: null,
    isAuthenticated: false
  }),

  getters: {
    constitution: (state) => state.user?.constitution,
    preferences: (state) => state.user?.preferences
  },

  actions: {
    async login(credentials) { ... },
    async logout() { ... },
    async fetchProfile() { ... },
    async updateConstitution(data) { ... },
    async updatePreferences(data) { ... }
  },

  persist: true  // æŒä¹…åŒ–åˆ° localStorage
})
```

---

## å…­ã€ç¬¬ä¸‰æ–¹æœåŠ¡å¯¹æ¥

### 6.1 AI å¤§æ¨¡å‹ API

**æ¨èé€‰é¡¹**ï¼š

| æœåŠ¡å•† | æ¨¡å‹ | ç‰¹ç‚¹ |
|--------|------|------|
| OpenAI | GPT-4 / GPT-3.5 | æ•ˆæœå¥½ï¼Œæˆæœ¬è¾ƒé«˜ |
| ç™¾åº¦ | æ–‡å¿ƒä¸€è¨€ | å›½å†…è®¿é—®ç¨³å®š |
| é˜¿é‡Œ | é€šä¹‰åƒé—® | å›½å†…è®¿é—®ç¨³å®š |
| è®¯é£ | æ˜Ÿç«å¤§æ¨¡å‹ | ä¸­æ–‡ç†è§£å¥½ |

**ä½“è´¨é—®è¯Š Prompt æ¨¡æ¿**ï¼š

```javascript
const systemPrompt = `ä½ æ˜¯ä¸€ä½èµ„æ·±ä¸­åŒ»ä½“è´¨è¯Šæ–­ä¸“å®¶ï¼ŒåŸºäºã€Šä¸­åŒ»ä½“è´¨åˆ†ç±»ä¸åˆ¤å®šã€‹æ ‡å‡†ï¼Œé€šè¿‡é—®è¯Šæ–¹å¼å¸®åŠ©ç”¨æˆ·åˆ¤æ–­ä½“è´¨ç±»å‹ã€‚

ä¹ç§ä½“è´¨ç±»å‹ï¼š
1. å¹³å’Œè´¨ - é˜´é˜³æ°”è¡€è°ƒå’Œ
2. æ°”è™šè´¨ - å…ƒæ°”ä¸è¶³
3. é˜³è™šè´¨ - é˜³æ°”ä¸è¶³ï¼Œç•å¯’æ€•å†·
4. é˜´è™šè´¨ - é˜´æ¶²äºå°‘ï¼Œè™šçƒ­å†…ç”Ÿ
5. ç—°æ¹¿è´¨ - ç—°æ¹¿å‡èš
6. æ¹¿çƒ­è´¨ - æ¹¿çƒ­å†…è•´
7. è¡€ç˜€è´¨ - è¡€è¡Œä¸ç•…
8. æ°”éƒè´¨ - æ°”æœºéƒæ»
9. ç‰¹ç¦€è´¨ - å…ˆå¤©ç‰¹æ®Š

é—®è¯Šè§„åˆ™ï¼š
1. æ¯æ¬¡åªé—®ä¸€ä¸ªé—®é¢˜
2. ä½¿ç”¨é€šä¿—æ˜“æ‡‚çš„è¯­è¨€
3. æä¾›3-4ä¸ªé€‰é¡¹ä¾›ç”¨æˆ·é€‰æ‹©
4. æ ¹æ®ç”¨æˆ·å›ç­”é€æ­¥ç¼©å°ä½“è´¨èŒƒå›´
5. æ”¶é›†è¶³å¤Ÿä¿¡æ¯åç»™å‡ºè¯Šæ–­ç»“æœ

å½“å‰å¯¹è¯å†å²ï¼š{history}
ç”¨æˆ·æœ€æ–°è¾“å…¥ï¼š{message}`;
```

### 6.2 èŠ‚æ°” API

å¯è‡ªè¡Œè®¡ç®—æˆ–è°ƒç”¨ç¬¬ä¸‰æ–¹ï¼š

```javascript
// utils/solarTerm.js
const SOLAR_TERMS = [
  { name: 'å°å¯’', tip: 'å®œæ¸©è¡¥è‚¾é˜³' },
  { name: 'å¤§å¯’', tip: 'å®œæ»‹é˜´æ¶¦ç‡¥' },
  // ... 24èŠ‚æ°”
];

function getCurrentSolarTerm(date = new Date()) {
  // åŸºäºå„’ç•¥æ—¥è®¡ç®—èŠ‚æ°”
  // è¿”å› { name, tip, date }
}
```

### 6.3 å¯¹è±¡å­˜å‚¨

ç”¨äºå­˜å‚¨ç”¨æˆ·å¤´åƒã€èœè°±å›¾ç‰‡ï¼š

| æœåŠ¡ | ç‰¹ç‚¹ |
|------|------|
| é˜¿é‡Œäº‘ OSS | å›½å†…è®¿é—®å¿« |
| è…¾è®¯äº‘ COS | å›½å†…è®¿é—®å¿« |
| AWS S3 | å›½é™…é€šç”¨ |
| MinIO | å¯è‡ªå»ºç§æœ‰ |

---

## ä¸ƒã€å¼€å‘é˜¶æ®µè§„åˆ’

### ç¬¬ä¸€é˜¶æ®µï¼šé¡¹ç›®åˆå§‹åŒ–ï¼ˆ1å‘¨ï¼‰

- [ ] åˆ›å»ºå‰ç«¯é¡¹ç›®ï¼ˆVite + Vue3ï¼‰
- [ ] åˆ›å»ºåç«¯é¡¹ç›®ï¼ˆKoa2ï¼‰
- [ ] é…ç½®å¼€å‘ç¯å¢ƒï¼ˆESLintã€Prettierï¼‰
- [ ] åˆå§‹åŒ–æ•°æ®åº“ï¼ˆMongoDBï¼‰
- [ ] å®ç°åŸºç¡€ä¸­é—´ä»¶ï¼ˆé”™è¯¯å¤„ç†ã€æ—¥å¿—ï¼‰
- [ ] è®¾è®¡å¹¶å¯¼å…¥ç§å­æ•°æ®

### ç¬¬äºŒé˜¶æ®µï¼šç”¨æˆ·è®¤è¯ï¼ˆ1å‘¨ï¼‰

- [ ] å®ç°ç”¨æˆ·æ³¨å†Œ/ç™»å½• API
- [ ] å®ç° JWT è®¤è¯ä¸­é—´ä»¶
- [ ] å‰ç«¯ç™»å½•/æ³¨å†Œé¡µé¢
- [ ] å‰ç«¯è·¯ç”±å®ˆå«
- [ ] ç”¨æˆ·ä¿¡æ¯æŒä¹…åŒ–

### ç¬¬ä¸‰é˜¶æ®µï¼šä½“è´¨è¯Šæ–­ï¼ˆ2å‘¨ï¼‰

- [ ] ä½“è´¨æ•°æ® API
- [ ] AI é—®è¯Š APIï¼ˆå¯¹æ¥å¤§æ¨¡å‹ï¼‰
- [ ] å‰ç«¯ä½“è´¨è¯Šæ–­é¡µé¢
- [ ] SVG äººä½“æ¨¡å‹ç»„ä»¶
- [ ] ä¹å®«æ ¼ä½“è´¨é€‰æ‹©ç»„ä»¶
- [ ] AI å¯¹è¯ç»„ä»¶

### ç¬¬å››é˜¶æ®µï¼šå£å‘³åå¥½ï¼ˆ1å‘¨ï¼‰

- [ ] åå¥½æ•°æ® API
- [ ] å‰ç«¯å£å‘³è°ƒä¼˜é¡µé¢
- [ ] äº”å‘³æ»‘å—ç»„ä»¶
- [ ] ç¦å¿Œæ ‡ç­¾ç»„ä»¶
- [ ] çŠ¶æ€åˆ‡æ¢ç»„ä»¶
- [ ] åœºæ™¯é€‰æ‹©ç»„ä»¶

### ç¬¬äº”é˜¶æ®µï¼šæ™ºè†³æ¨èï¼ˆ2å‘¨ï¼‰

- [ ] èœè°± CRUD API
- [ ] æ¨èç®—æ³•å®ç°
- [ ] å‰ç«¯æ¨èå¤§ç›˜é¡µé¢
- [ ] èœè°±å¡ç‰‡ç»„ä»¶
- [ ] èœè°±è¯¦æƒ…å¼¹çª—
- [ ] AI æ´å¯Ÿç»„ä»¶
- [ ] æ”¶è—åŠŸèƒ½

### ç¬¬å…­é˜¶æ®µï¼šé£Ÿæç™¾ç§‘ï¼ˆ1å‘¨ï¼‰

- [ ] é£Ÿæ API
- [ ] å‰ç«¯é£Ÿæåˆ—è¡¨é¡µ
- [ ] é£Ÿæè¯¦æƒ…é¡µ
- [ ] æœç´¢åŠŸèƒ½

### ç¬¬ä¸ƒé˜¶æ®µï¼šä¼˜åŒ–ä¸æµ‹è¯•ï¼ˆ1å‘¨ï¼‰

- [ ] æ€§èƒ½ä¼˜åŒ–
- [ ] å“åº”å¼é€‚é…
- [ ] å•å…ƒæµ‹è¯•
- [ ] é›†æˆæµ‹è¯•
- [ ] Bug ä¿®å¤

### ç¬¬å…«é˜¶æ®µï¼šéƒ¨ç½²ä¸Šçº¿ï¼ˆ1å‘¨ï¼‰

- [ ] æœåŠ¡å™¨é…ç½®
- [ ] Docker å®¹å™¨åŒ–
- [ ] CI/CD é…ç½®
- [ ] åŸŸåä¸ SSL
- [ ] ç›‘æ§ä¸æ—¥å¿—

---

## å…«ã€ç¯å¢ƒé…ç½®

### 8.1 å‰ç«¯ç¯å¢ƒå˜é‡

```bash
# client/.env.development
VITE_API_BASE_URL=http://localhost:3000/api/v1
VITE_APP_TITLE=é£Ÿå…»æ™ºè„‘

# client/.env.production
VITE_API_BASE_URL=https://api.example.com/api/v1
VITE_APP_TITLE=é£Ÿå…»æ™ºè„‘
```

### 8.2 åç«¯ç¯å¢ƒå˜é‡

```bash
# server/.env
NODE_ENV=development
PORT=3000

# Database
MONGODB_URI=mongodb://localhost:27017/food_synergy

# JWT
JWT_SECRET=your-super-secret-key
JWT_EXPIRES_IN=7200
JWT_REFRESH_EXPIRES_IN=604800

# AI Service
AI_API_KEY=your-ai-api-key
AI_API_URL=https://api.openai.com/v1/chat/completions
AI_MODEL=gpt-3.5-turbo

# OSS (å¯é€‰)
OSS_ACCESS_KEY=xxx
OSS_SECRET_KEY=xxx
OSS_BUCKET=food-synergy
OSS_REGION=oss-cn-hangzhou
```

---

## ä¹ã€éƒ¨ç½²æ¶æ„

```
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚   Nginx     â”‚
                    â”‚ (åå‘ä»£ç†)   â”‚
                    â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
                           â”‚
           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
           â”‚               â”‚               â”‚
           â–¼               â–¼               â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚  Frontend   â”‚ â”‚  Backend    â”‚ â”‚  Static     â”‚
    â”‚  (Vue SPA)  â”‚ â”‚  (Koa API)  â”‚ â”‚  (Images)   â”‚
    â”‚  Port:80    â”‚ â”‚  Port:3000  â”‚ â”‚  OSS/CDN    â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           â”‚
                           â–¼
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚  MongoDB    â”‚
                    â”‚  Port:27017 â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Docker Compose é…ç½®

```yaml
version: '3.8'

services:
  frontend:
    build: ./client
    ports:
      - "80:80"
    depends_on:
      - backend

  backend:
    build: ./server
    ports:
      - "3000:3000"
    environment:
      - NODE_ENV=production
      - MONGODB_URI=mongodb://mongo:27017/food_synergy
    depends_on:
      - mongo

  mongo:
    image: mongo:6
    ports:
      - "27017:27017"
    volumes:
      - mongo_data:/data/db

volumes:
  mongo_data:
```

---

## åã€æ³¨æ„äº‹é¡¹ä¸æœ€ä½³å®è·µ

### 10.1 å®‰å…¨æ€§

1. **å¯†ç åŠ å¯†**ï¼šä½¿ç”¨ bcryptï¼Œcost factor >= 10
2. **JWT å®‰å…¨**ï¼š
   - ä½¿ç”¨ RS256 ç®—æ³•ï¼ˆç”Ÿäº§ç¯å¢ƒï¼‰
   - Access Token çŸ­æœŸæœ‰æ•ˆï¼ˆ2å°æ—¶ï¼‰
   - Refresh Token é•¿æœŸæœ‰æ•ˆï¼ˆ7å¤©ï¼‰
3. **è¾“å…¥éªŒè¯**ï¼šä½¿ç”¨ Joi è¿›è¡Œå‚æ•°æ ¡éªŒ
4. **é˜²æ³¨å…¥**ï¼šä½¿ç”¨ Mongoose å‚æ•°åŒ–æŸ¥è¯¢
5. **é™æµ**ï¼šä½¿ç”¨ koa-ratelimit é˜²æ­¢æš´åŠ›æ”»å‡»
6. **CORS**ï¼šé…ç½®ç™½åå•åŸŸå
7. **HTTPS**ï¼šç”Ÿäº§ç¯å¢ƒå¼ºåˆ¶ä½¿ç”¨

### 10.2 æ€§èƒ½ä¼˜åŒ–

1. **æ•°æ®åº“ç´¢å¼•**ï¼šä¸ºå¸¸ç”¨æŸ¥è¯¢å­—æ®µå»ºç«‹ç´¢å¼•
2. **Redis ç¼“å­˜**ï¼šç¼“å­˜çƒ­é—¨èœè°±ã€èŠ‚æ°”æ•°æ®
3. **åˆ†é¡µæŸ¥è¯¢**ï¼šå¤§åˆ—è¡¨ä½¿ç”¨æ¸¸æ ‡åˆ†é¡µ
4. **å›¾ç‰‡ä¼˜åŒ–**ï¼šä½¿ç”¨ WebP æ ¼å¼ï¼ŒCDN åŠ é€Ÿ
5. **ä»£ç åˆ†å‰²**ï¼šVue è·¯ç”±æ‡’åŠ è½½
6. **Gzip å‹ç¼©**ï¼šNginx å¼€å¯ gzip

### 10.3 ä»£ç è§„èŒƒ

1. **ESLint + Prettier**ï¼šç»Ÿä¸€ä»£ç é£æ ¼
2. **Git Commit è§„èŒƒ**ï¼šä½¿ç”¨ Conventional Commits
3. **API ç‰ˆæœ¬æ§åˆ¶**ï¼šURL è·¯å¾„åŒ…å«ç‰ˆæœ¬å· `/api/v1`
4. **é”™è¯¯ç è§„èŒƒ**ï¼šç»Ÿä¸€é”™è¯¯ç å®šä¹‰
5. **æ³¨é‡Šè§„èŒƒ**ï¼šå…³é”®é€»è¾‘æ·»åŠ  JSDoc æ³¨é‡Š

---

## é™„å½• Aï¼šä¹ç§ä½“è´¨æ•°æ®

```json
[
  {
    "code": "balanced",
    "name": "å¹³å’Œè´¨",
    "icon": "â˜¯",
    "description": "é˜´é˜³æ°”è¡€è°ƒå’Œï¼Œä½“æ€é€‚ä¸­ï¼Œé¢è‰²çº¢æ¶¦ï¼Œç²¾åŠ›å……æ²›",
    "characteristics": ["ç²¾åŠ›å……æ²›", "ç¡çœ è‰¯å¥½", "è‚¤è‰²æ¶¦æ³½", "æ€§æ ¼å¼€æœ—"],
    "dietaryAdvice": {
      "recommended": ["å±±è¯", "çº¢æ£", "å°ç±³", "è²å­"],
      "avoided": [],
      "suitableFlavors": ["ç”˜", "å¹³"],
      "cookingMethods": ["è’¸", "ç…®", "ç‚–"]
    }
  },
  {
    "code": "qi-deficiency",
    "name": "æ°”è™šè´¨",
    "icon": "â˜",
    "description": "å…ƒæ°”ä¸è¶³ï¼Œç–²ä¹æ°”çŸ­ï¼Œå®¹æ˜“å‡ºæ±—ï¼Œå£°éŸ³ä½å¼±",
    "characteristics": ["å®¹æ˜“ç–²åŠ³", "æ°”çŸ­æ‡’è¨€", "æ˜“å‡ºæ±—", "æŠµæŠ—åŠ›å·®"],
    "dietaryAdvice": {
      "recommended": ["é»„èŠª", "å…šå‚", "å±±è¯", "çº¢æ£", "é¸¡è‚‰"],
      "avoided": ["èåœ", "æ§Ÿæ¦”", "ç”Ÿå†·é£Ÿç‰©"],
      "suitableFlavors": ["ç”˜", "æ¸©"],
      "cookingMethods": ["ç‚–", "ç…²", "è’¸"]
    }
  },
  {
    "code": "yang-deficiency",
    "name": "é˜³è™šè´¨",
    "icon": "â„",
    "description": "é˜³æ°”ä¸è¶³ï¼Œç•å¯’æ€•å†·ï¼Œæ‰‹è„šå†°å‡‰ï¼Œå–œçƒ­é¥®é£Ÿ",
    "characteristics": ["æ‰‹è„šå†°å‡‰", "ç•å¯’æ€•å†·", "å–œçƒ­é¥®", "å¤§ä¾¿æºè–„"],
    "dietaryAdvice": {
      "recommended": ["ç¾Šè‚‰", "ç”Ÿå§œ", "æ¡‚åœ†", "æ ¸æ¡ƒ", "éŸ­èœ"],
      "avoided": ["è¥¿ç“œ", "è‹¦ç“œ", "ç»¿è±†", "å†·é¥®"],
      "suitableFlavors": ["è¾›", "ç”˜", "æ¸©"],
      "cookingMethods": ["ç‚–", "ç…®", "ç‚’"]
    }
  },
  {
    "code": "yin-deficiency",
    "name": "é˜´è™šè´¨",
    "icon": "ğŸ”¥",
    "description": "é˜´æ¶²äºå°‘ï¼Œå£ç‡¥å’½å¹²ï¼Œæ‰‹è¶³å¿ƒçƒ­ï¼Œæ½®çƒ­ç›—æ±—",
    "characteristics": ["å£ç‡¥å’½å¹²", "æ‰‹è¶³å¿ƒçƒ­", "æ½®çƒ­ç›—æ±—", "ä¾¿ç§˜"],
    "dietaryAdvice": {
      "recommended": ["é“¶è€³", "ç™¾åˆ", "é›ªæ¢¨", "æ¸æ", "é¸­è‚‰"],
      "avoided": ["è¾£æ¤’", "ç¾Šè‚‰", "æ²¹ç‚¸é£Ÿå“"],
      "suitableFlavors": ["ç”˜", "é…¸", "å‡‰"],
      "cookingMethods": ["ç‚–", "è’¸", "å‡‰æ‹Œ"]
    }
  },
  {
    "code": "phlegm-dampness",
    "name": "ç—°æ¹¿è´¨",
    "icon": "ğŸ’§",
    "description": "ç—°æ¹¿å‡èšï¼Œå½¢ä½“è‚¥èƒ–ï¼Œè…¹éƒ¨è‚¥æ»¡ï¼Œå£é»è‹”è…»",
    "characteristics": ["ä½“å½¢åèƒ–", "å£é»è…»", "èƒ¸é—·", "èº«é‡å›°å€¦"],
    "dietaryAdvice": {
      "recommended": ["è–ç±³", "å†¬ç“œ", "å±±æ¥‚", "é™ˆçš®", "è·å¶"],
      "avoided": ["è‚¥è‚‰", "ç”œé£Ÿ", "æ²¹è…»é£Ÿç‰©"],
      "suitableFlavors": ["è‹¦", "è¾›", "æ·¡"],
      "cookingMethods": ["è’¸", "ç…®", "å°‘æ²¹"]
    }
  },
  {
    "code": "damp-heat",
    "name": "æ¹¿çƒ­è´¨",
    "icon": "ğŸŒ¡",
    "description": "æ¹¿çƒ­å†…è•´ï¼Œé¢å¢æ²¹å…‰ï¼Œæ˜“ç”Ÿç—¤ç–®ï¼Œå£è‹¦å£å¹²",
    "characteristics": ["é¢éƒ¨æ²¹è…»", "å£è‹¦å£è‡­", "æ˜“ç”Ÿç—˜", "å¤§ä¾¿é»æ»"],
    "dietaryAdvice": {
      "recommended": ["ç»¿è±†", "è‹¦ç“œ", "å†¬ç“œ", "è–ç±³", "èŠèŠ±"],
      "avoided": ["è¾£æ¤’", "ç¾Šè‚‰", "çƒ§çƒ¤", "é…’"],
      "suitableFlavors": ["è‹¦", "ç”˜", "å‡‰"],
      "cookingMethods": ["æ¸…è’¸", "å‡‰æ‹Œ", "ç…®"]
    }
  },
  {
    "code": "blood-stasis",
    "name": "è¡€ç˜€è´¨",
    "icon": "ğŸ©¸",
    "description": "è¡€è¡Œä¸ç•…ï¼Œè‚¤è‰²æ™¦æš—ï¼Œæ˜“ç”Ÿè‰²æ–‘ï¼Œå”‡è‰²æš—æ·¡",
    "characteristics": ["è‚¤è‰²åæš—", "æ˜“ç”Ÿæ–‘ç‚¹", "å”‡è‰²ç´«æš—", "å¥å¿˜"],
    "dietaryAdvice": {
      "recommended": ["å±±æ¥‚", "ç«ç‘°èŠ±", "å½“å½’", "çº¢ç³–", "é»‘æœ¨è€³"],
      "avoided": ["è‚¥è‚‰", "å¥¶æ²¹", "å†·é¥®"],
      "suitableFlavors": ["è¾›", "ç”˜"],
      "cookingMethods": ["ç‚–", "ç…®", "æ³¡èŒ¶"]
    }
  },
  {
    "code": "qi-stagnation",
    "name": "æ°”éƒè´¨",
    "icon": "ğŸŒ€",
    "description": "æ°”æœºéƒæ»ï¼Œæƒ…ç»ªæ•æ„Ÿï¼Œå¿§éƒè„†å¼±ï¼Œèƒ¸èƒèƒ€æ»¡",
    "characteristics": ["æƒ…ç»ªæ³¢åŠ¨", "å¤šæ„å–„æ„Ÿ", "èƒ¸é—·å¹æ¯", "å’½éƒ¨å¼‚ç‰©æ„Ÿ"],
    "dietaryAdvice": {
      "recommended": ["ç«ç‘°èŠ±", "ä½›æ‰‹", "é™ˆçš®", "é‡‘æ¡”", "èåœ"],
      "avoided": ["æµ“èŒ¶", "å’–å•¡", "è¾›è¾£åˆºæ¿€"],
      "suitableFlavors": ["è¾›", "è‹¦", "é…¸"],
      "cookingMethods": ["æ³¡èŒ¶", "æ¸…ç‚’", "ç…®"]
    }
  },
  {
    "code": "special",
    "name": "ç‰¹ç¦€è´¨",
    "icon": "ğŸŒ¸",
    "description": "å…ˆå¤©ç‰¹æ®Šï¼Œæ˜“è¿‡æ•ï¼Œé€‚åº”èƒ½åŠ›å·®",
    "characteristics": ["æ˜“è¿‡æ•", "é—ä¼ æ€§", "é€‚åº”åŠ›å·®"],
    "dietaryAdvice": {
      "recommended": ["èœ‚èœœ", "çº¢æ£", "é»„èŠª", "çµèŠ"],
      "avoided": ["ä¸ªäººè¿‡æ•åŸ", "æµ·é²œ", "è›‹å¥¶ï¼ˆè§†æƒ…å†µï¼‰"],
      "suitableFlavors": ["ç”˜", "å¹³"],
      "cookingMethods": ["è’¸", "ç…®", "ç‚–"]
    }
  }
]
```

---

**æ–‡æ¡£ç‰ˆæœ¬**ï¼šv1.0
**æœ€åæ›´æ–°**ï¼š2024å¹´11æœˆ
**ä½œè€…**ï¼šAI Assistant
